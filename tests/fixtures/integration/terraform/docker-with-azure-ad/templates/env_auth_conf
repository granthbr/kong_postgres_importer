#!/usr/bin/env bash

export KONG_ADMIN_GUI_AUTH_CONF='{"verify_parameters":false,"auth_methods":["authorization_code","password"],"authenticated_groups_claim":["roles"],"client_id":["${oidc_client_id}"],"client_secret":["${oidc_client_secret}"],"consumer_by":["username"],"admin_claim":"name","issuer":"${issuer}","login_redirect_uri":["${manager_url}"],"logout_methods":["GET","DELETE","POST"],"logout_query_arg":"logout","logout_redirect_uri":["${manager_url}"],"redirect_uri":["${manager_url}"],"scopes":["openid","profile","email","${oidc_client_id}/.default"],"ssl_verify":false}'
export KONG_PORTAL_AUTH_CONF='{"downstream_headers_claims":["preferred_username"],"groups_claim":["roles"],"groups_required":["${workspace}-portal-group"],"session_cookie_domain":".${domain}","verify_parameters":false,"leeway":100,"auth_methods":["authorization_code","password","session"],"redirect_uri":["${portalapi_url}/${workspace}/auth"],"login_action":"redirect","logout_redirect_uri":["${portal_url}/${workspace}"],"consumer_claim":["preferred_username"],"ssl_verify":false,"consumer_by":["username"],"scopes":["openid","profile","email","offline_access","${oidc_client_id}/.default"],"logout_query_arg":"logout","client_secret":["${oidc_client_secret}"],"issuer":"${issuer}","forbidden_redirect_uri":["${portal_url}/${workspace}/unauthorized"],"client_id":["${oidc_client_id}"],"logout_methods":["GET"],"login_redirect_uri":["${portal_url}/${workspace}"],"login_redirect_mode":"query"}'
